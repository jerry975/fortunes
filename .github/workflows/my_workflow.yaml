name: my_workflow
on:
  push:
    branches:
      - 'v[0-9].[0-9]'
jobs:
    workflow:
        runs-on: ubuntu-latest

        steps:
        - name: Checkout code
          uses: actions/checkout@v4
          
        - name: scan
          uses: aquasecurity/trivy-action@master
          with:
            scan-type: 'fs'
            format: 'table'
            output: 'trivy-results.txt'
            severity: 'CRITICAL'

        - name: Send custom JSON data to Slack workflow
          id: slack
          uses: slackapi/slack-github-action@v1.24.0
          with:
              # For posting a rich message using Block Kit
            payload: |
              {
                "text": "1",
                "blocks": [
                  {
                    "type": "section",
                    "text": {
                      "type": "mrkdwn",
                      "text": "2"
                    }
                  }
                ]
              }
          env:
            SLACK_WEBHOOK_URL: ${{ secrets.SLACK_WEBHOOK }}
            SLACK_WEBHOOK_TYPE: INCOMING_WEBHOOK

        